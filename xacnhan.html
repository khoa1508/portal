<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X√°c Nh·∫≠n Nh·∫≠p H·ªçc - HAN AI LAB</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #D32F2F;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #e9ecef;
            margin: 0;
            padding: 20px;
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        /* --- C·ªòT TR√ÅI: NH·∫¨P LI·ªÜU --- */
        .control-panel {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            width: 320px;
            position: sticky;
            top: 20px;
        }

        .control-panel h2 {
            color: var(--primary-color);
            margin-top: 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            font-size: 20px;
        }
        
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px; color: #555; }
        .form-group input, .form-group select {
            width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; 
            font-size: 14px; transition: 0.3s; box-sizing: border-box;
        }
        .form-group input:focus { border-color: var(--primary-color); outline: none; }
        
        .file-upload-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
            margin-bottom: 5px;
        }
        .file-upload-wrapper input[type=file] {
            font-size: 13px;
            background: #f8f9fa;
            padding: 8px;
            width: 100%;
        }

        .admin-tools { display: none; }

        .btn-download {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 14px;
            width: 100%;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(211, 47, 47, 0.2);
            transition: all 0.2s;
            margin-top: 15px;
        }
        .btn-download:hover { background-color: #b71c1c; transform: translateY(-1px); }

        /* --- C·ªòT PH·∫¢I: PREVIEW --- */
        .preview-container {
            background: #525659;
            padding: 30px;
            border-radius: 8px;
            overflow: auto;
            max-height: 90vh; 
        }

        #doc-template {
            width: 750px;
            background: white;
            padding: 50px;
            box-sizing: border-box;
            position: relative;
            background-color: white; 
            overflow: hidden; 
        }

        /* --- C·∫§U H√åNH KH·ªêI (BLOCK) --- */
        /* M·ªói kh·ªëi (X√°c nh·∫≠n, N·ªôi quy) s·∫Ω c√≥ v·ªã tr√≠ t∆∞∆°ng ƒë·ªëi ƒë·ªÉ ch·ª©a logo ch√¨m ri√™ng */
        .doc-section {
            position: relative;
            z-index: 1;
        }

        /* --- WATERMARK (LOGO CH√åM) --- */
        .watermark {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; 
            background-image: url('https://res.cloudinary.com/dylnm79id/image/upload/v1769343424/Kho%CC%82ng_ne%CC%82%CC%80n_ev0wrm.png');
            background-repeat: no-repeat;
            background-position: center center; /* CƒÉn gi·ªØa logo trong kh·ªëi c·ªßa n√≥ */
            background-size: 500px; /* K√≠ch th∆∞·ªõc logo */
            opacity: 0.1; /* ƒê·ªô m·ªù 10% */
            pointer-events: none;
            z-index: 0; /* N·∫±m d∆∞·ªõi n·ªôi dung ch·ªØ */
        }

        /* ƒê·∫£m b·∫£o n·ªôi dung ch·ªØ n·ªïi l√™n tr√™n watermark */
        .doc-section > *:not(.watermark) {
            position: relative;
            z-index: 2;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center; 
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .brand-area {
            display: flex;
            align-items: center;
            gap: 15px; 
        }
        
        #preview-logo {
            display: none; 
            max-height: 80px; 
            max-width: 200px;
            object-fit: contain;
        }

        .brand-name { font-size: 28px; font-weight: 800; color: var(--primary-color); letter-spacing: 0.5px; }
        .meta-info { text-align: right; color: #666; font-size: 13px; line-height: 1.5; }

        /* Title */
        .main-title { text-align: center; margin-bottom: 30px; }
        .main-title h1 { margin: 0; font-size: 26px; text-transform: uppercase; color: #222; }
        .main-title p { margin: 5px 0 0; color: #666; font-style: italic; }

        /* Info Table */
        .info-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        .info-table td { padding: 12px 15px; border-bottom: 1px solid #eee; }
        .info-table tr:first-child td { border-top: 1px solid #eee; }
        .label-col { width: 140px; color: #666; font-weight: 600; }
        .value-col { color: #000; font-weight: 700; font-size: 15px; }

        /* Thank You Section */
        .thank-you-box {
            background-color: transparent; 
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 40px;
            border: 1px solid rgba(211, 47, 47, 0.1); 
            border-left-width: 4px;
        }
        .thank-you-box h3 { margin: 0 0 10px 0; color: var(--primary-color); font-size: 16px; }
        .thank-you-box p { margin: 0; line-height: 1.6; color: #444; font-size: 14px; text-align: justify; }

        /* Signature */
        .signature-section {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 30px; /* Gi·∫£m kho·∫£ng c√°ch d∆∞·ªõi ƒë·ªÉ g·ªçn h∆°n */
        }
        .sign-block { text-align: center; width: 220px; }
        .sign-title { font-weight: bold; margin-bottom: 60px; display: block; }
        .sign-stamp { color: var(--primary-color); font-weight: bold; text-transform: uppercase; }

        /* --- PH·∫¶N N·ªòI QUY --- */
        .rules-wrapper {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px dashed #ccc;
        }
        
        .rules-title {
            text-align: center;
            font-size: 18px;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-transform: uppercase;
            font-weight: 800;
        }
        .rule-content { font-size: 13px; line-height: 1.6; color: #333; text-align: justify; }
        .rule-content h4 { 
            color: #222; 
            margin: 15px 0 5px 0; 
            font-size: 14px; 
            text-transform: uppercase; 
            background: rgba(238, 238, 238, 0.8);
            padding: 5px 10px;
            border-radius: 4px;
        }
        .rule-content h5 { color: #444; margin: 10px 0 5px 0; font-size: 13px; font-weight: 700; }
        .rule-content ul { margin: 5px 0; padding-left: 20px; }
        .rule-content li { margin-bottom: 4px; }
        
        .footer-note {
            margin-top: 30px;
            text-align: center;
            font-style: italic;
            font-size: 12px;
            color: #777;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
    </style>
</head>
<body>

    <!-- INPUT PANEL -->
    <div class="control-panel">
        <h2>NH·∫¨P TH√îNG TIN</h2>

        <div class="form-group" id="upload-section" style="display:none;">
            <label>Logo trung t√¢m</label>
            <div class="file-upload-wrapper">
                <input type="file" id="inpLogo" accept="image/*" onchange="loadLogo(event)">
            </div>
        </div>
        
        <div class="form-group">
            <label>T√™n h·ªçc vi√™n</label>
            <input type="text" id="inpName" placeholder="VD: Nguy·ªÖn VƒÉn A" oninput="updatePreview()">
        </div>

        <div class="form-group">
            <label>Kh√≥a h·ªçc ƒëƒÉng k√Ω</label>
            <input type="text" id="inpCourse" placeholder="VD: H√°n Ng·ªØ S∆° C·∫•p 1" oninput="updatePreview()">
        </div>

        <div class="form-group">
            <label>Ca h·ªçc / L·ªãch h·ªçc</label>
            <input type="text" id="inpSchedule" placeholder="VD: Th·ª© 2-4-6 (19h00 - 20h30)" oninput="updatePreview()">
        </div>

        <div class="form-group">
            <label>Ng√†y ƒëƒÉng k√Ω</label>
            <input type="date" id="inpDate" oninput="updatePreview()">
        </div>

        <button class="btn-download" onclick="downloadPDF()">‚¨á Xu·∫•t PDF (K√®m N·ªôi Quy)</button>
    </div>

    <!-- PREVIEW AREA -->
    <div class="preview-container">
        <div id="doc-template">
            
            <!-- --- PH·∫¶N 1: X√ÅC NH·∫¨N ƒêƒÇNG K√ù (C√≥ logo ch√¨m ri√™ng) --- -->
            <div class="doc-section confirmation-part">
                <!-- Logo ch√¨m s·ªë 1 -->
                <div class="watermark"></div>

                <!-- Header -->
                <div class="header">
                    <div class="brand-area">
                        <img id="preview-logo" src="" alt="Logo" crossorigin="anonymous">
                        <div class="brand-name" id="brandText" style="display:none;">HAN AI LAB</div> 
                    </div>
                    <div class="meta-info">
                        M√£ h·ªì s∆°: <span id="txtId">---</span><br>
                        Ng√†y: <span id="txtDateHeader">---</span>
                    </div>
                </div>

                <!-- Main Title -->
                <div class="main-title">
                    <h1>X√°c Nh·∫≠n ƒêƒÉng K√Ω H·ªçc Th√†nh C√¥ng</h1>
                    <p>(K√®m N·ªôi quy & ƒêi·ªÅu kho·∫£n l·ªõp h·ªçc)</p>
                </div>

                <!-- Info Table -->
                <table class="info-table">
                    <tr>
                        <td class="label-col">H·ªçc vi√™n:</td>
                        <td class="value-col" id="txtMainName">Nguy·ªÖn VƒÉn A</td>
                    </tr>
                    <tr>
                        <td class="label-col">Kh√≥a h·ªçc:</td>
                        <td class="value-col" id="txtCourse">---</td>
                    </tr>
                    <tr>
                        <td class="label-col">L·ªãch h·ªçc:</td>
                        <td class="value-col" id="txtSchedule">---</td>
                    </tr>
                    <tr>
                        <td class="label-col">Tr·∫°ng th√°i:</td>
                        <td class="value-col" style="color: green;">‚úî ƒêƒÉng k√Ω th√†nh c√¥ng</td>
                    </tr>
                </table>

                <!-- Thank You Note -->
                <div class="thank-you-box">
                    <h3>Ch√†o m·ª´ng th√†nh vi√™n m·ªõi!</h3>
                    <p>
                        Ch√∫c m·ª´ng b·∫°n <strong id="txtNoteName" style="color: var(--primary-color);">Nguy·ªÖn VƒÉn A</strong> ƒë√£ ƒëƒÉng k√Ω l·ªõp h·ªçc th√†nh c√¥ng! Trung t√¢m <strong>HAN AI LAB</strong> ƒë√£ ghi nh·∫≠n ƒë·∫ßy ƒë·ªß th√¥ng tin c·ªßa b·∫°n. 
                        <br><br>
                        C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† l·ª±a ch·ªçn ƒë·ªìng h√†nh c√πng ch√∫ng t√¥i trong h√†nh tr√¨nh h·ªçc t·∫≠p s·∫Øp t·ªõi. Ch√∫ng m√¨nh s·∫Ω s·ªõm li√™n h·ªá ƒë·ªÉ cung c·∫•p th√™m th√¥ng tin chi ti·∫øt v·ªÅ l·ªõp h·ªçc v√† c√°c h∆∞·ªõng d·∫´n c·∫ßn thi·∫øt.
                        <br><br>
                        R·∫•t mong ƒë∆∞·ª£c g·∫∑p b·∫°n trong l·ªõp h·ªçc! üå±
                    </p>
                </div>

                <!-- Signature -->
                <div class="signature-section">
                    <div class="sign-block">
                        <span class="sign-title">ƒê·∫°i di·ªán HAN AI LAB</span>
                        <span class="sign-stamp">ƒê√£ X√°c Nh·∫≠n</span>
                    </div>
                </div>
            </div>

            <!-- --- PH·∫¶N 2: N·ªòI QUY (C√≥ logo ch√¨m ri√™ng) --- -->
            <div class="doc-section rules-wrapper">
                <!-- Logo ch√¨m s·ªë 2 -->
                <div class="watermark"></div>

                <div class="rules-title">N·ªòI QUY & ƒêI·ªÄU KHO·∫¢N ƒêƒÇNG K√ù L·ªöP H·ªåC</div>
                <div class="rule-content">
                    <h4>I. M·ª•c ƒë√≠ch v√† nguy√™n t·∫Øc chung</h4>
                    <p>B·ªô n·ªôi quy v√† ƒëi·ªÅu kho·∫£n n√†y ƒë∆∞·ª£c x√¢y d·ª±ng nh·∫±m:</p>
                    <ul>
                        <li>ƒê·∫£m b·∫£o quy·ªÅn l·ª£i ch√≠nh ƒë√°ng cho gi√°o vi√™n v√† h·ªçc vi√™n;</li>
                        <li>T·∫°o m√¥i tr∆∞·ªùng h·ªçc t·∫≠p ·ªïn ƒë·ªãnh, nghi√™m t√∫c v√† hi·ªáu qu·∫£;</li>
                        <li>H·∫°n ch·∫ø c√°c gi√°n ƒëo·∫°n trong qu√° tr√¨nh gi·∫£ng d·∫°y v√† h·ªçc t·∫≠p.</li>
                    </ul>
                    <p>Vi·ªác h·ªçc vi√™n ƒëƒÉng k√Ω l·ªõp h·ªçc ƒë·ªìng nghƒ©a v·ªõi vi·ªác ƒë√£ ƒë·ªçc, hi·ªÉu v√† ƒë·ªìng √Ω v·ªõi to√†n b·ªô n·ªôi dung d∆∞·ªõi ƒë√¢y.</p>

                    <h4>II. Quy ƒë·ªãnh v·ªÅ ƒëƒÉng k√Ω v√† gi·ªØ ch·ªó</h4>
                    <h5>1. ƒêƒÉng k√Ω ch√≠nh th·ª©c</h5>
                    <ul>
                        <li>H·ªçc vi√™n ch·ªâ ƒë∆∞·ª£c xem l√† ƒëƒÉng k√Ω th√†nh c√¥ng khi ƒë√£ ho√†n t·∫•t h·ªçc ph√≠ ho·∫∑c ti·ªÅn ƒë·∫∑t c·ªçc theo th√¥ng b√°o c·ªßa trung t√¢m.</li>
                        <li>Trung t√¢m c√≥ quy·ªÅn t·ª´ ch·ªëi gi·ªØ ch·ªó n·∫øu h·ªçc vi√™n ch∆∞a ho√†n th√†nh nghƒ©a v·ª• t√†i ch√≠nh ƒë√∫ng th·ªùi h·∫°n.</li>
                    </ul>
                    <h5>2. Ti·ªÅn ƒë·∫∑t c·ªçc</h5>
                    <ul>
                        <li>Ti·ªÅn ƒë·∫∑t c·ªçc c√≥ m·ª•c ƒë√≠ch gi·ªØ ch·ªó, s·∫Øp x·∫øp l·ªõp h·ªçc v√† k·∫ø ho·∫°ch gi·∫£ng d·∫°y.</li>
                        <li>Trong tr∆∞·ªùng h·ª£p h·ªçc vi√™n h·ªßy ƒëƒÉng k√Ω ho·∫∑c d·ªùi l·ªãch h·ªçc v√¨ l√Ω do c√° nh√¢n, ti·ªÅn ƒë·∫∑t c·ªçc kh√¥ng ƒë∆∞·ª£c ho√†n l·∫°i.</li>
                        <li>Trong tr∆∞·ªùng h·ª£p trung t√¢m kh√¥ng s·∫Øp x·∫øp ƒë∆∞·ª£c l·ªõp h·ªçc cho h·ªçc vi√™n, trung t√¢m c√≥ tr√°ch nhi·ªám ho√†n l·∫°i ti·ªÅn ƒë·∫∑t c·ªçc.</li>
                    </ul>
                    <h5>3. H·ªßy ƒëƒÉng k√Ω tr∆∞·ªõc ng√†y khai gi·∫£ng</h5>
                    <ul>
                        <li>N·∫øu h·ªçc vi√™n th√¥ng b√°o h·ªßy tr∆∞·ªõc ng√†y khai gi·∫£ng t·ªëi thi·ªÉu 07 ng√†y, trung t√¢m h·ªó tr·ª£: B·∫£o l∆∞u ti·ªÅn h·ªçc ph√≠ (n·∫øu ƒë√£ ƒë√≥ng) cho kh√≥a h·ªçc kh√°c trong th·ªùi h·∫°n quy ƒë·ªãnh; Kh√¥ng √°p d·ª•ng ho√†n ti·ªÅn.</li>
                    </ul>

                    <h4>III. Quy ƒë·ªãnh v·ªÅ h·ªçc ph√≠ v√† ho√†n ph√≠</h4>
                    <h5>1. Nguy√™n t·∫Øc chung</h5>
                    <ul>
                        <li><strong>ƒê·ªëi v·ªõi l·ªõp nh√≥m:</strong> H·ªçc ph√≠ ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n k·∫ø ho·∫°ch gi·∫£ng d·∫°y tr·ªçn kh√≥a. Do ƒë√≥, h·ªçc ph√≠ kh√¥ng mang t√≠nh tr·∫£ theo t·ª´ng bu·ªïi l·∫ª.</li>
                        <li><strong>ƒê·ªëi v·ªõi l·ªõp h·ªçc 1 k√®m 1:</strong> H·ªçc ph√≠ ƒë∆∞·ª£c thu theo t·ª´ng giai ƒëo·∫°n h·ªçc. Trung t√¢m s·∫Ω th√¥ng b√°o nh·∫Øc ƒë√≥ng h·ªçc ph√≠ v√†o bu·ªïi h·ªçc th·ª© 6/10. H·ªçc vi√™n vui l√≤ng ho√†n th√†nh tr∆∞·ªõc bu·ªïi th·ª© 8.</li>
                        <li>Tr∆∞·ªùng h·ª£p h·ªçc vi√™n ch∆∞a ho√†n th√†nh h·ªçc ph√≠ ƒë√∫ng h·∫°n, trung t√¢m c√≥ quy·ªÅn t·∫°m d·ª´ng bu·ªïi h·ªçc ti·∫øp theo.</li>
                    </ul>
                    <h5>2. Ngh·ªâ h·ªçc gi·ªØa ch·ª´ng (L·ªõp 1 k√®m 1)</h5>
                    <ul>
                        <li>Trong m·ªói g√≥i 10 bu·ªïi, h·ªçc vi√™n ƒë∆∞·ª£c h·ªó tr·ª£ ngh·ªâ t·ªëi ƒëa 02 bu·ªïi (c√≥ b√°o tr∆∞·ªõc) v√† ƒë∆∞·ª£c s·∫Øp x·∫øp h·ªçc b√π.</li>
                        <li>Ngh·ªâ t·ª´ bu·ªïi th·ª© 3 tr·ªü ƒëi: V·∫´n t√≠nh l√† bu·ªïi h·ªçc b√¨nh th∆∞·ªùng, kh√¥ng h·ªçc b√π.</li>
                        <li>Xin ngh·ªâ gi·ªØa kh√≥a v√¨ l√Ω do c√° nh√¢n: Kh√¥ng ho√†n l·∫°i h·ªçc ph√≠. C√≥ th·ªÉ xem x√©t b·∫£o l∆∞u.</li>
                    </ul>
                    <h5>3. Tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát</h5>
                    <ul>
                        <li>V·ªõi c√°c l√Ω do b·∫•t kh·∫£ kh√°ng (·ªëm ƒëau d√†i ng√†y, tai n·∫°n‚Ä¶), trung t√¢m s·∫Ω xem x√©t h·ªó tr·ª£ tr√™n tinh th·∫ßn thi·ªán ch√≠.</li>
                    </ul>

                    <h4>IV. Quy ƒë·ªãnh v·ªÅ ngh·ªâ h·ªçc v√† b·∫£o l∆∞u</h4>
                    <ul>
                        <li><strong>Ngh·ªâ h·ªçc:</strong> C·∫ßn b√°o tr∆∞·ªõc √≠t nh·∫•t 5 ti·∫øng.</li>
                        <li><strong>B·∫£o l∆∞u:</strong> ƒê∆∞·ª£c ph√©p b·∫£o l∆∞u 01 l·∫ßn/kh√≥a, th·ªùi h·∫°n t·ªëi ƒëa 6 th√°ng. Sau th·ªùi h·∫°n n√†y kh√≥a h·ªçc xem nh∆∞ k·∫øt th√∫c.</li>
                    </ul>

                    <h4>V. Quy ƒë·ªãnh v·ªÅ l·ªãch h·ªçc</h4>
                    <ul>
                        <li>L·ªãch h·ªçc ƒë∆∞·ª£c th·ªëng nh·∫•t tr∆∞·ªõc khi khai gi·∫£ng. Trung t√¢m kh√¥ng cam k·∫øt ƒë√°p ·ª©ng y√™u c·∫ßu thay ƒë·ªïi l·ªãch c√° nh√¢n n·∫øu ·∫£nh h∆∞·ªüng ƒë·∫øn l·ªõp chung.</li>
                    </ul>

                    <h4>VI. Tr√°ch nhi·ªám v√† cam k·∫øt</h4>
                    <ul>
                        <li><strong>Gi√°o vi√™n:</strong> Gi·∫£ng d·∫°y ƒë√∫ng chuy√™n m√¥n, ƒë√∫ng th·ªùi l∆∞·ª£ng, h·ªó tr·ª£ h·ªçc vi√™n t·∫≠n t√¨nh.</li>
                        <li><strong>H·ªçc vi√™n:</strong> H·ªçc ƒë√∫ng gi·ªù, t√¥n tr·ªçng gi√°o vi√™n v√† b·∫°n h·ªçc, tu√¢n th·ªß n·ªôi quy.</li>
                    </ul>
                </div>
            </div>

            <div class="footer-note">
                VƒÉn b·∫£n n√†y c√≥ hi·ªáu l·ª±c k·ªÉ t·ª´ ng√†y ƒëƒÉng k√Ω. Tr√¢n tr·ªçng c·∫£m ∆°n s·ª± h·ª£p t√°c c·ªßa b·∫°n.<br>
                HAN AI LAB
            </div>
        </div>
    </div>

    <script>
        const LOGO_MAC_DINH = "https://res.cloudinary.com/dylnm79id/image/upload/v1769343291/Co%CC%81_ne%CC%82%CC%80n_pebclj.jpg";
        
        window.onload = function() {
            document.getElementById('inpDate').valueAsDate = new Date();
            updatePreview();

            if (LOGO_MAC_DINH) {
                const img = document.getElementById('preview-logo');
                img.src = LOGO_MAC_DINH;
                img.style.display = 'block';
                document.getElementById('upload-section').style.display = 'none'; 
            }
        };

        function loadLogo(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    displayLogo(e.target.result);
                }
                reader.readAsDataURL(file);
            }
        }

        function displayLogo(src) {
            const img = document.getElementById('preview-logo');
            img.src = src;
            img.style.display = 'block';
        }

        function updatePreview() {
            const name = document.getElementById('inpName').value || "Nguy·ªÖn VƒÉn A";
            const course = document.getElementById('inpCourse').value || "T√™n kh√≥a h·ªçc";
            const schedule = document.getElementById('inpSchedule').value || "---";
            const dateInput = document.getElementById('inpDate').value;
            
            const dateObj = dateInput ? new Date(dateInput) : new Date();

            if(document.getElementById('txtId').innerText === "---") {
                document.getElementById('txtId').innerText = "DK" + Math.floor(Math.random() * 100000);
            }

            document.getElementById('txtDateHeader').innerText = dateObj.toLocaleDateString('vi-VN');
            document.getElementById('txtMainName').innerText = name;
            document.getElementById('txtNoteName').innerText = name;
            document.getElementById('txtCourse').innerText = course;
            document.getElementById('txtSchedule').innerText = schedule;
        }

        async function downloadPDF() {
            const element = document.getElementById('doc-template');
            const name = document.getElementById('inpName').value || "HocVien";
            const btn = document.querySelector('.btn-download');
            
            btn.innerText = "‚è≥ ƒêang x·ª≠ l√Ω...";
            
            try {
                const canvas = await html2canvas(element, { 
                    scale: 2, 
                    useCORS: true,
                    allowTaint: true
                });
                const imgData = canvas.toDataURL('image/png');
                
                const { jsPDF } = window.jspdf;
                const pdfWidth = 210; 
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                const pdf = new jsPDF('p', 'mm', [pdfWidth, pdfHeight]);

                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`XacNhan_HanAiLab_${name}.pdf`);
            } catch (err) {
                alert("L·ªói xu·∫•t PDF: " + err);
                console.error(err);
            } finally {
                btn.innerText = "‚¨á Xu·∫•t PDF (K√®m N·ªôi Quy)";
            }
        }
    </script>
</body>
</html>
