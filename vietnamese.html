<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ‹¼è¯»ç»ƒä¹ ï½œè¶Šè¯­å¬è¾¨æ‹¼å†™ï¼ˆNghe chá»n chÃ­nh táº£ Ä‘Ãºngï¼‰</title>
  <!-- Modern cute fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&family=Inter:wght@400;600&family=Noto+Sans+SC:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8fafc;          /* light */
      --card:#ffffff;        /* white */
      --ink:#0f172a;         /* slate-900 */
      --muted:#6b7280;       /* gray-500 */
      --line:#e5e7eb;        /* gray-200 */
      --brand:#06b6d4;       /* cyan-500 */
      --brand-2:#a78bfa;     /* violet-400 */
      --ok:#22c55e;          /* green-500 */
      --bad:#ef4444;         /* red-500 */
      --shadow:0 10px 30px rgba(2,6,23,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:
        radial-gradient(1200px 500px at 10% -10%, rgba(6,182,212,.10), transparent 60%),
        radial-gradient(900px 400px at 110% 0%, rgba(167,139,250,.12), transparent 60%),
        var(--bg);
      color:var(--ink);
      font:16px/1.55 "Nunito","Inter","Noto Sans SC", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      letter-spacing:.2px;
    }
    header{
      display:flex;align-items:center;gap:14px;justify-content:space-between;padding:18px 22px;position:sticky;top:0;z-index:5;
      background:linear-gradient(180deg, rgba(255,255,255,.92) 40%, rgba(255,255,255,0));
      backdrop-filter:saturate(1.2) blur(8px); border-bottom:1px solid var(--line);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:16px;background:linear-gradient(135deg,#67e8f9,#c7d2fe);display:grid;place-items:center;box-shadow:var(--shadow)}
    .logo span{font-size:26px}
    h1{margin:0;font-size:20px;font-weight:800}
    .sub{color:var(--muted);font-size:12px;margin-top:2px}

    .wrap{max-width:980px;margin:0 auto;padding:22px}
    .cards{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.cards{grid-template-columns:1fr 1fr}}

    .card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:var(--shadow)}
    .card h2{margin:0 0 8px 0;font-size:18px}
    .muted{color:var(--muted)}

    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:10px 0 0}
    .pill{background:#f1f5f9;border:1px solid var(--line);padding:8px 12px;border-radius:999px;display:flex;align-items:center;gap:8px}
    .btn{border:0;border-radius:14px;padding:10px 14px;font-weight:800;cursor:pointer;background:#e0f2fe;color:#0c4a6e;border:1px solid #bae6fd;box-shadow:var(--shadow)}
    .btn:hover{transform:translateY(-1px)}
    .btn.brand{background:linear-gradient(135deg, #d5f5ff, #efe9ff);color:#312e81;border-color:#dbeafe}
    .btn.ok{background:#dcfce7;color:#065f46;border-color:#bbf7d0}

    .score{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:6px;background:#fff;border:1px solid var(--line);padding:6px 10px;border-radius:999px}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .tab{padding:10px 14px;border-radius:14px;border:1px solid var(--line);background:#fff;cursor:pointer;font-weight:700}
    .tab.active{background:linear-gradient(135deg, rgba(6,182,212,.15), rgba(167,139,250,.18));}

    .options{display:grid;grid-template-columns:1fr;gap:10px;margin-top:10px}
    @media(min-width:600px){.options{grid-template-columns:1fr 1fr}}
    .opt{padding:14px;border-radius:14px;background:#ffffff;border:1.5px solid var(--line);cursor:pointer;text-align:center;transition:.15s box-shadow,.15s transform}
    .opt:hover{box-shadow:0 6px 16px rgba(2,6,23,.10); transform:translateY(-1px)}
    .opt.correct{outline:2px solid var(--ok)}
    .opt.incorrect{outline:2px solid var(--bad)}

    .toast{position:fixed;right:16px;bottom:16px;background:#ffffff;border:1px solid var(--line);padding:12px 14px;border-radius:12px;opacity:0;transform:translateY(8px);transition:.3s;box-shadow:var(--shadow)}
    .toast.show{opacity:1;transform:none}

    input[type=range]{width:160px}
    input[type=number]{width:64px}
    textarea{width:100%;min-height:200px;background:#fff;color:var(--ink);border:1px solid var(--line);border-radius:14px;padding:12px}
    code{background:#f1f5f9;border:1px solid var(--line);padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"><span>ğŸ€</span></div>
      <div>
        <h1>æ‹¼è¯»ç»ƒä¹  Â· å¬éŸ³é€‰æ­£ç¡®æ‹¼å†™</h1>
        <div class="sub">è¶Šå—è¯­å…¥é—¨ â€” åªä¿ç•™ã€Œå¬ä¸é€‰ã€é¢˜å‹ Â· æ•°æ®æ¥æºï¼šä½ æä¾›çš„ <b>æ‹¼è¯»ç»ƒä¹ </b></div>
      </div>
    </div>
    <div class="score">
      <span class="badge">â±ï¸ æ—¶é—´ <b id="timer">00:00</b></span>
      <span class="badge">â­ å¾—åˆ† <b id="points">0</b></span>
      <span class="badge">ğŸ”¥ è¿å¯¹ <b id="streak">0</b></span>
    </div>
  </header>

  <div class="wrap">
    <div class="tabs" role="tablist">
      <button class="tab active" role="tab" aria-selected="true" id="tab-1">â‘  ç»ƒä¹ </button>
      <button class="tab" role="tab" aria-selected="false" id="tab-2">â‘¡ æ•°æ®ç¼–è¾‘</button>
      <button class="tab" role="tab" aria-selected="false" id="tab-3">è®¾ç½®</button>
    </div>

    <!-- TAB 1: Minimal pair choice only -->
    <section class="card" id="panel-1" role="tabpanel" aria-labelledby="tab-1">
      <h2>ğŸ¯ å¬ä¸€å¬ï¼Œé€‰å‡º<b>æ­£ç¡®æ‹¼å†™</b></h2>
      <p class="muted">æç¤ºï¼šç‚¹å‡»ã€Œæ’­æ”¾ã€åè†å¬è¶Šå—è¯­è¯»éŸ³ï¼Œç„¶ååœ¨ä¸‹é¢é€‰é¡¹ä¸­é€‰æ‹©æ­£ç¡®çš„è¯/è¯ç»„ã€‚</p>
      <div class="toolbar">
        <button class="btn brand" id="play">â–¶ï¸ æ’­æ”¾</button>
        <button class="btn" id="repeat">ğŸ” é‡æ’­</button>
        <button class="btn" id="skip">â­ï¸ è·³è¿‡</button>
        <span class="pill">é€‰é¡¹æ•°é‡ï¼š<input id="nopts" type="number" min="2" max="5" value="4"></span>
      </div>
      <div class="options" id="options"></div>
      <p class="muted" id="hintbox">å‡ºé”™ä¸€æ¬¡åä¼šå‡ºç°å°æç¤ºï½(â‰§â—¡â‰¦) â™¡</p>
    </section>

    <!-- TAB 2: Data editor (one item per line) -->
    <section class="card" id="panel-2" role="tabpanel" aria-labelledby="tab-2" hidden>
      <h2>ğŸ§° æ•°æ®ç¼–è¾‘ï¼ˆæ¥è‡ªã€Œæ‹¼è¯»ç»ƒä¹ ã€ï¼‰</h2>
      <p class="muted">æ¯ä¸€è¡Œæ˜¯ä¸€æ¡è¯/çŸ­è¯­ã€‚å¯ä»¥æŠŠä¹¦ä¸Šçš„æ¡ç›®ç›´æ¥ç²˜è´´è¿›æ¥ï¼Œç³»ç»Ÿä¼šæŒ‰å¸¸è§æ··æ·†ï¼ˆ<code>tr/ch</code>ã€<code>s/x</code>ã€<code>d/gi/r</code>ã€<code>g/gh</code>ã€<code>ng/ngh</code>ã€å£°è°ƒç­‰ï¼‰è‡ªåŠ¨ç”Ÿæˆå¹²æ‰°é¡¹ã€‚</p>
      <div class="toolbar">
        <button class="btn" id="load-sample">ğŸ“¦ è½½å…¥æ ·ä¾‹ï¼ˆå–è‡ªä½ ç»™çš„å›¾ç‰‡ï¼‰</button>
        <button class="btn ok" id="apply-list">ğŸ’¾ åº”ç”¨åˆ—è¡¨</button>
        <button class="btn" id="export-list">ğŸ§¾ å¯¼å‡º TXT</button>
        <button class="btn" id="reset-progress">ğŸ§¹ æ¸…é™¤è¿›åº¦</button>
      </div>
      <textarea id="rawlist" placeholder="ä¾‹å¦‚ï¼š\ntrai gÃ¡i\nphá»¥ ná»¯\nthá»§ Ä‘Ã´\nâ€¦"></textarea>
      <p class="muted">æ•°æ®ä¿å­˜äºæµè§ˆå™¨ï¼ˆLocalStorageï¼‰ï¼Œå¯éšæ—¶å¯¼å‡º/å¯¼å…¥ã€‚</p>
    </section>

    <!-- TAB 3: Settings -->
    <section class="card" id="panel-3" role="tabpanel" aria-labelledby="tab-3" hidden>
      <h2>âš™ï¸ è®¾ç½® Â· è¯­éŸ³</h2>
      <div class="cards">
        <div class="card">
          <h3>è¯­éŸ³æ’­æ”¾</h3>
          <div class="toolbar">
            <span class="pill">å‘éŸ³ï¼š<select id="voice"></select></span>
            <span class="pill">è¯­é€Ÿï¼š<input id="rate" type="range" min="0.7" max="1.3" value="1" step="0.05"> <span id="rate-val">1.00Ã—</span></span>
            <span class="pill">æ¯é¢˜æ’­æ”¾ï¼š<input id="repeats" type="number" min="1" max="5" value="1"></span>
          </div>
          <p class="muted">å°è´´å£«ï¼šSafari/iOS éœ€è¦å…ˆç‚¹ä¸€æ¬¡æ’­æ”¾æˆæƒå£°éŸ³ï¼›è‹¥æœªè§è¶Šè¯­è¯­éŸ³ï¼Œç­‰å€™åˆ—è¡¨åŠ è½½æˆ–é€‰æ‹©ä¸ <code>vi-VN</code> æ¥è¿‘çš„å£°éŸ³ã€‚</p>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

<script>
// ===== Helpers =====
const $ = s => document.querySelector(s); const $$ = s => Array.from(document.querySelectorAll(s));
const sleep = ms => new Promise(r => setTimeout(r, ms));
function toast(msg){ const t=$('#toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 1600); }

// Timer/score
let points=0, streak=0, timerSec=0, timerInt=null; function startTimer(){ if(timerInt) return; timerInt=setInterval(()=>{ timerSec++; $('#timer').textContent=new Date(timerSec*1000).toISOString().substring(14,19); },1000); }

// ===== Voices (TTS) =====
let VOICES=[], currentVoice=null; function loadVoices(){ VOICES = speechSynthesis.getVoices(); const sel=$('#voice'); if(!sel) return; sel.innerHTML=''; const desired=['vi-VN','vi_VN']; VOICES.sort((a,b)=>(desired.includes(b.lang)-desired.includes(a.lang))||a.name.localeCompare(b.name)); VOICES.forEach((v,i)=>{ const o=document.createElement('option'); o.value=i; o.textContent=`${v.name} (${v.lang})`; if(desired.includes(v.lang) && !currentVoice){ currentVoice=v; o.selected=true; } sel.appendChild(o); }); if(!currentVoice && VOICES[0]){ currentVoice=VOICES[0]; sel.value=0; } }
window.speechSynthesis.onvoiceschanged=loadVoices;
function speak(text,{rate=1,repeats=1}={}){ return new Promise(async res=>{ if(!text){ res(); return;} for(let i=0;i<repeats;i++){ const u=new SpeechSynthesisUtterance(text); u.voice=currentVoice; u.lang=currentVoice?.lang||'vi-VN'; u.rate=rate; speechSynthesis.cancel(); speechSynthesis.speak(u); while(speechSynthesis.speaking) await sleep(50); if(i<repeats-1) await sleep(250);} res(); }); }

// ===== Data =====
const SAMPLE_LIST = `bÃ i bÃ¡o
trai gÃ¡i
sai trÃ¡i
mÃ¡y bay
cay cÃº
thay tháº¿
cháº¡y dÃ i
khÃ¢u vÃ¡
cháº­u thau
tráº§u cau
mau láº¹
lÃ¢u nhÃ¢u
Ä‘áº§u trÃ¢u
nhÃ  láº§u
cÃ¢u cÃ¡
sÃ¢u xa
Ä‘au Ä‘áº§u
theo Ä‘uá»•i
giáº¥y tá»
tháº¥y rÃµ
nhá» cáº­y
tháº§y giÃ¡o
táº¡i sao
cá»§a cáº£i
giÃ³ bá»¥i
vui chÆ¡i
lÃºi hÃºi
trá»¥i lÃ¹i
bá»‘i rá»‘i
HÃ  Ná»™i
Ä‘Ã²i há»i
má»i nÆ¡i
soi tháº¥u
há»™i chá»£
chÆ¡i bá»i
chá» Ä‘á»£i
nghá»‰ ngÆ¡i
cá»©u chá»¯a
há»¯u nghá»‹
lÆ°u Ã½
khÃ³ ngá»­i
gá»­i lá»i
hiu háº¯t
chá»‹u khÃ³
tiu nghá»‰u
lÃªu khÃªu
leo trÃ¨o
láº»o Ä‘áº»o
heo may
rau muá»‘ng
Ä‘uÃ´i gÃ 
hÆ°Æ¡u nai
cÆ°á»i tÆ°Æ¡i
bÆ°á»Ÿi Ä‘Ã o
lÆ°á»¡i trai
ngÆ°á»i Ä‘á»i
yÃªu dáº¥u
nhiá»u Ä‘iá»u
yáº¿u Ä‘uá»‘i
phá»¥ ná»¯
nghá» phá»¥
phÃ¹ há»£p
lá»‡ phÃ­
phá»Ÿ bÃ²
cháº¿ Ä‘á»™
che chá»Ÿ
chÃ¨ lÃ¡
va li
vÃ© sá»‘
vá»‡ sÄ©
vi mÃ´
vÃ­ dá»¥
vá»‹ trÃ­
vÃ¬ tháº¿
tráº» thÆ¡
trÃ¬ trá»‡
trá»‹ giÃ¡
xá»© sá»Ÿ
nghá»‡ sÄ©
ká»µ sÄ©
lo sá»£
sá»‘ Ä‘á»
sÆ¡ há»Ÿ
sÆ¡-mi
giáº£ vá»
giáº£ sá»­
kÃ½ giáº£
do dá»±
ra-Ä‘i-Ã´
ra-Ä‘a
gia vá»‹
khÃ¡ giáº£
thi Ä‘ua
gÃ² ghá»
Ä‘i nháº¹
thá»© tá»±
thÆ° tá»«
tu bá»•
bÃ² dÃª
tá»‰ má»‰
thÆ° kÃ½
tháº¿ há»‡
nhÃ  ga
cÅ© ká»¹
cá»­ táº¡
ngÃ£ ba
tá»§ gá»—
Ä‘a táº¡
cá» Ä‘á»
Ä‘á»• bá»™
cÆ¡ khÃ­
ca nÃ´
bá»‘ máº¹
ba mÃ¡
bÃ  cá»¥
bÃ© nhá»
bá» Há»“
Ä‘i bá»™
no nÃª
bÃ© bÃ©
nhÆ° tháº¿
nghi ngá»
hÃ© ná»Ÿ
ghi nhá»›
tÃ² mÃ²
nhá»• máº¡
thá» Æ¡
máº¹ Ä‘áº»
gháº¿
gá»—
gÃ² bÃ³
ngu ngÆ¡
mÆ¡ há»“
thÃ´ lá»—
gháº» lá»Ÿ
thá»§ Ä‘Ã´
khÃ­ tháº¿
ha háº£
kháº£ thi
Ä‘u Ä‘á»§
Ä‘i tu
ghi-ta
cá»‘ Ã½
há»“ Ä‘á»“
háº£ hÃª
káº» thÃ¹
tháº¿ ká»·
cÃ¡ thá»ƒ
lÃ² cÃ²
la Ã³
Ä‘i Ã´ tÃ´
Ä‘i Ä‘Ã²`;

let WORDS = (localStorage.getItem('vn_words')||'').trim(); if(!WORDS){ WORDS=SAMPLE_LIST; }
function saveWords(){ localStorage.setItem('vn_words', WORDS); }
function getItems(){ return WORDS.split(/\n+/).map(s=>s.trim()).filter(Boolean); }

// ===== Distractor generator =====
function replaceStart(word, from, to){ return word.replace(new RegExp('^'+from),''+to); }
function noDiacritics(s){ return s.normalize('NFD').replace(/\p{Diacritic}/gu,'').replace(/Ä‘/g,'d').replace(/Ä/g,'D'); }
function randomToneVariant(s){ const toneMap = { 'a':'Ã¡Ã áº£Ã£áº¡','Äƒ':'áº¯áº±áº³áºµáº·','Ã¢':'áº¥áº§áº©áº«áº­','e':'Ã©Ã¨áº»áº½áº¹','Ãª':'áº¿á»á»ƒá»…á»‡','i':'Ã­Ã¬á»‰Ä©á»‹','o':'Ã³Ã²á»Ãµá»','Ã´':'á»‘á»“á»•á»—á»™','Æ¡':'á»›á»á»Ÿá»¡á»£','u':'ÃºÃ¹á»§Å©á»¥','Æ°':'á»©á»«á»­á»¯á»±','y':'Ã½á»³á»·á»¹á»µ' }; let out=''; let changed=false; for(const ch of s){ if(!changed && toneMap[ch]){ const opts=toneMap[ch]; const pick=opts[Math.floor(Math.random()*opts.length)]; out+=pick; changed=true; } else { out+=ch; } } return changed?out:s; }
function altSpellings(word){ const alts=new Set(); const w=word;
  if(/^tr/.test(w)) alts.add(replaceStart(w,'tr','ch')); if(/^ch/.test(w)) alts.add(replaceStart(w,'ch','tr'));
  if(/^s/.test(w)) alts.add(replaceStart(w,'s','x')); if(/^x/.test(w)) alts.add(replaceStart(w,'x','s'));
  if(/^gi/.test(w)) { alts.add(replaceStart(w,'gi','d')); alts.add(replaceStart(w,'gi','r')); }
  if(/^d/.test(w)) { alts.add(replaceStart(w,'d','gi')); alts.add(replaceStart(w,'d','r')); }
  if(/^r/.test(w)) { alts.add(replaceStart(w,'r','d')); alts.add(replaceStart(w,'r','gi')); }
  if(/^gh[eiÃª]/.test(w)) alts.add(w.replace(/^gh/,'g')); if(/^g[ieÃª]/.test(w)) alts.add(w.replace(/^g/,'gh'));
  if(/^ngh[ieÃª]/.test(w)) alts.add(w.replace(/^ngh/,'ng')); if(/^ng[ieÃª]/.test(w)) alts.add(w.replace(/^ng/,'ngh'));
  if(/^c[ei]/.test(w)) { alts.add(w.replace(/^c/,'k')); alts.add(w.replace(/^c/,'q')); }
  if(/^k[ei]/.test(w)) { alts.add(w.replace(/^k/,'c')); }
  if(/^q(u?)/.test(w)) { alts.add(w.replace(/^q/,'k')); }
  const nod=noDiacritics(w); if(nod!==w) alts.add(nod);
  alts.add(randomToneVariant(w));
  if(/-/.test(w)) { alts.add(w.replace(/-/g,' ')); alts.add(w.replace(/-/g,'')); }
  alts.delete(w); return Array.from(alts).slice(0,6);
}

// ===== Quiz state =====
let idx=0; let items=getItems();
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

function render(){ if(items.length===0){ $('#options').innerHTML='<em>æš‚æ— æ•°æ®ã€‚</em>'; return; }
  const word = items[idx % items.length];
  const opts=[word, ...altSpellings(word)].filter(Boolean);
  const n = Math.min(+$('#nopts').value || 4, Math.max(2, opts.length));
  const picked = shuffle(opts).slice(0, n-1);
  if(!picked.includes(word)) picked[0]=word;
  const final = shuffle([word, ...picked.filter(o=>o!==word).slice(0, n-1)]);
  const box=$('#options'); box.innerHTML='';
  final.forEach(text=>{
    const b=document.createElement('button'); b.className='opt'; b.textContent=text; b.onclick=()=>choose(text,b,word); box.appendChild(b);
  });
  $('#hintbox').textContent='';
}

function choose(choice, btn, correct){ if(choice===correct){ btn.classList.add('correct'); points+=6; streak++; toast('ğŸ‰ å¤ªæ£’å•¦ï¼+6'); idx++; setTimeout(()=>{ render(); speak(items[idx%items.length],{rate:+$('#rate').value,repeats:+$('#repeats').value}); }, 260);
  }else{ btn.classList.add('incorrect'); streak=0; $('#hintbox').textContent='æç¤ºï¼šæ³¨æ„å£°æ¯ä¸å£°è°ƒï¼ˆå¦‚ tr/ch, s/x, d/gi/r, gh~g, ngh~ngâ€¦ï¼‰'; toast('ğŸ™ƒ å†å¬ä¸€éè¯•è¯•ï½'); }
  $('#points').textContent=points; $('#streak').textContent=streak; }

function play(){ startTimer(); speak(items[idx%items.length],{rate:+$('#rate').value,repeats:+$('#repeats').value}); }

// ===== Tabs & Bind =====
function showTab(n){ $$('.tab').forEach((t,i)=>{ t.classList.toggle('active', i===n-1); t.setAttribute('aria-selected', i===n-1); }); [1,2,3].forEach(i=> $('#panel-'+i).hidden = i!==n); }
function bind(){
  $('#tab-1').onclick=()=>showTab(1);
  $('#tab-2').onclick=()=>{ showTab(2); $('#rawlist').value = WORDS; };
  $('#tab-3').onclick=()=>showTab(3);

  $('#play').onclick=()=>{ play(); };
  $('#repeat').onclick=()=>{ speak(items[idx%items.length],{rate:+$('#rate').value,repeats:+$('#repeats').value}); };
  $('#skip').onclick=()=>{ idx=(idx+1)%items.length; render(); play(); };

  $('#voice').onchange=e=>{ currentVoice = speechSynthesis.getVoices()[+e.target.value]||currentVoice; toast('å·²åˆ‡æ¢å‘éŸ³'); };
  $('#rate').oninput=e=> $('#rate-val').textContent=(+e.target.value).toFixed(2)+'Ã—';

  $('#load-sample').onclick=()=>{ $('#rawlist').value=SAMPLE_LIST; toast('å·²è½½å…¥æ ·ä¾‹'); };
  $('#apply-list').onclick=()=>{ WORDS = $('#rawlist').value.trim(); saveWords(); items=getItems(); idx=0; render(); toast('å·²åº”ç”¨å¹¶ä¿å­˜'); };
  $('#export-list').onclick=()=>{ const blob=new Blob([WORDS],{type:'text/plain'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='words.txt'; a.click(); URL.revokeObjectURL(url); };
  $('#reset-progress').onclick=()=>{ points=0; streak=0; timerSec=0; $('#points').textContent=0; $('#streak').textContent=0; $('#timer').textContent='00:00'; toast('è¿›åº¦å·²æ¸…é™¤'); };
}

(function(){ bind(); loadVoices(); startTimer(); items=getItems(); render(); })();
</script>
</body>
</html>
